<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gamer Profile Page | UNCG LFG</title>

  <!-- Bootstrap + Fonts -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&family=Rajdhani:wght@400;700&display=swap"
    rel="stylesheet" />
  <link rel="icon" type="image/png" href="images/favicon/gaming-controller.webp" />
  <link rel="stylesheet" href="styles/styles.css" />

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
  <script src="scripts/navbar.js" defer></script>
  <script src="scripts/gamer-profile-page.js" defer></script>
</head>

<body class="bg-dark text-white">

  <!-- Navbar -->
  <div id="navbar-container"></div>

  <main class="container my-4">

<!-- Greeting Section -->
<section class="text-center">
  <h4 id="user-greeting" class="text-white mt-4"></h4>

  <!-- Suspension Warning (⛔️ visible here under username) -->
  <div id="suspension-warning"
    class="alert alert-warning alert-dismissible fade show text-dark text-center fw-semibold shadow mx-auto mt-3"
    role="alert"
    style="display: none; max-width: 700px;">
    ⚠️ Your account has been suspended due to violation of community guidelines. Continued behavior may lead to a permanent ban.
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>

  <h5>
    Don't forget to enter your PSN gamertag, Xbox gamertag, or your Steam ID number at the bottom of the page
    in the Profile Details section so that other gamers can see your gamertags in the groups you join or create!
  </h5>
  <h5>
    Below is a list of all the communities you are a member of once you join communities.
  </h5>
</section>


    <!-- Steam Account Linking Info -->
    <div class="mt-3">
      <button id="steam-tips-toggle" class="btn btn-outline-info mb-2" type="button" data-bs-toggle="collapse"
        data-bs-target="#steamPrivacyTips" aria-expanded="false" aria-controls="steamPrivacyTips">
        <img src="images/platform-logos/steam-logo.jpg" alt="Steam" class="img-fluid me-2" width="20" />
        Steam Account Linking Tips
      </button>

      <div class="collapse" id="steamPrivacyTips">
        <div class="card card-body bg-dark text-white">
          <ul>
            <li>To link your Steam Account, scroll down to the Profile Details section.</li>
            <li>Now open a new tab and login to your Steam Account on <a href="https://store.steampowered.com/" 
              target="_blank" class="text-info">Steam</a>. 
              Once logged in, go to your <a href="https://store.steampowered.com/account/" target="_blank" class="text-info"> Account
                Details</a>.</li>
            <li>Now look for your Steam ID number towards the top of the account page. It is a 17-digit number.</li>
            <li>Copy this 17-digit number.</li>
            <li>Enter your Steam ID number in the provided field.</li>
            <li>Click the <strong>Link Steam Account</strong> button.</li>
            <li>Refresh the page to see your Steam achievements.</li>
          </ul>
        </div>
      </div>

    </div>

    <!-- Communities Section -->
    <section class="mt-4">
      <h3 class="text-center">Your Communities</h3>
      <div id="communities-container" class="list-group"></div>
    </section>

    <!-- Steam Games -->
    <section class="mt-5">
      <h2 class="text-center">Your Steam Games</h2>
      <div id="steam-games-container" class="row"></div>
    </section>

    <!-- No Achievements Modal -->
    <div class="modal fade" id="noAchievementsModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white">
          <div class="modal-header">
            <h5 class="modal-title">No Achievements Found</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>This game may not support achievements.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile Avatar Upload -->
    <section class="text-center my-4">
      <label for="profile-upload">
        <img src="images/default-picture.svg" id="gamer-avatar" class="rounded-circle img-fluid profile-img" width="150"
          alt="User Avatar" />
      </label>
      <input type="file" id="profile-upload" accept="image/*" hidden />
    </section>

    <!-- Profile Details -->
    <section class="row justify-content-center">
      <div class="col-lg-8">
        <div class="card bg-dark text-white p-4 rounded shadow">
          <h4>Profile Details</h4>

          <!-- Username -->
          <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" class="form-control bg-secondary text-white" disabled autocomplete="off" />
            <button class="btn btn-outline-warning mt-2" id="edit-username">Edit</button>
            <button class="btn btn-outline-success mt-2" id="save-username" style="display: none;">Save</button>
          </div>

          <!-- Email -->
          <div class="form-group mt-3">
            <label for="email">Email:</label>
            <input type="email" id="email" class="form-control bg-secondary text-white" disabled autocomplete="off" />
            <button class="btn btn-outline-warning mt-2" id="edit-email">Edit</button>
            <button class="btn btn-outline-success mt-2" id="save-email" style="display: none;">Save</button>
          </div>

          <!-- Password -->
          <!-- Uncomment the following lines if you want to include password editing functionality in the future
          <div class="form-group mt-3">
            <label for="password">Password:</label>
            <input type="password" id="password" class="form-control bg-secondary text-white" value="••••••" disabled autocomplete="off" />
            <button class="btn btn-outline-warning mt-2" onclick="editField('password')">Edit</button>
          </div>
          -->
          <!-- Gaming Accounts -->
          <div class="mt-4">
            <h4>Gaming Accounts</h4>
            <div class="row">
              <!-- PlayStation -->
              <div class="col-md-4 text-center">
                <img src="images/platform-logos/playstation-logo.jpg" alt="PlayStation" class="img-fluid mb-2"
                  width="50" />
                <label for="psn-id">PSN Gamertag:</label>
                <input type="text" id="psn-id" class="form-control bg-secondary text-white" disabled
                  autocomplete="off" />
                <button class="btn btn-outline-warning mt-2" id="edit-psn">Edit</button>
                <button class="btn btn-outline-success mt-2" id="save-psn" style="display: none;">Save</button>
              </div>

              <!-- Xbox -->
              <div class="col-md-4 text-center">
                <img src="images/platform-logos/xbox-logo.png" alt="Xbox" class="img-fluid mb-2" width="50" />
                <label for="xbox-id">Xbox Gamertag:</label>
                <input type="text" id="xbox-id" class="form-control bg-secondary text-white" disabled
                  autocomplete="off" />
                <button class="btn btn-outline-warning mt-2" id="edit-xbox">Edit</button>
                <button class="btn btn-outline-success mt-2" id="save-xbox" style="display: none;">Save</button>
              </div>

              <!-- Steam -->
              <div class="col-md-4 text-center">
                <img src="images/platform-logos/steam-logo.jpg" alt="Steam" class="img-fluid mb-2" width="50" />
                <label for="steam-id">Steam ID number:</label>
                <input type="text" id="steam-id" class="form-control bg-secondary text-white" autocomplete="off" />
                <button class="btn btn-warning mt-2" id="link-steam">Link Steam Account</button>
              </div>
            </div>
          </div>

          <!--Reusable Toast for Username, Email, PSN, and Xbox gamertags -->
          <div class="toast-container position-fixed bottom-0 end-0 p-3">
            <div id="genericToast" class="toast bg-dark text-white" role="alert" aria-live="assertive" aria-atomic="true">
              <div class="toast-header bg-dark text-white">
                <strong id="toastTitle" class="me-auto">Notification</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
              </div>
              <div id="toastBody" class="toast-body">
                <!-- Toast message will be dynamically inserted here -->
              </div>
            </div>
          </div>

          <!-- Toast to enter a valid Steam ID Number -->
          <div class="toast-container position-fixed bottom-0 end-0 p-3">
            <div id="steamIdToast" class="toast bg-danger text-white" role="alert" aria-live="assertive"
              aria-atomic="true">
              <div class="toast-header bg-danger text-white">
                <strong class="me-auto">Error</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"
                  aria-label="Close"></button>
              </div>
              <div class="toast-body">
                Please enter a valid Steam ID number.
              </div>
            </div>
          </div>

          <!-- Steam Account Linking Success Modal -->
          <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                  <h5 class="modal-title" id="successModalLabel">Success</h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  Steam account linked successfully!
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Steam Account Linking Error Modal -->
          <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                  <h5 class="modal-title" id="errorModalLabel">Error</h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Close"></button>
                </div>
                <div class="modal-body" id="errorModalBody">
                  <!-- Error message will be dynamically inserted here -->
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Logout -->
          <div class="text-center mt-4">
            <button class="btn btn-danger" onclick="logout()">Logout</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Steam Info -->
    <section class="text-center mt-5">
      <h3 class="text-white">Steam Profile</h3>
      <img id="steam-avatar" src="images/default-picture.svg" class="rounded-circle img-fluid" width="100"
        alt="Steam Avatar" />
      <h4 id="steam-username" class="text-white mt-2">N/A</h4>
      <a id="steam-profile-link" href="#" target="_blank" class="btn btn-primary" style="display: none;">View Steam
        Profile</a>
    </section>

  </main>

  <!-- Footer -->
  <footer class="bg-dark text-white text-center py-3 mt-4">
    Copyright © 2025 UNCG LFG. All rights reserved.
  </footer>

</body>

</html>